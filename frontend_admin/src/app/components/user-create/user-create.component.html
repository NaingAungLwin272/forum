<div>
  <h2 class="create-user">User Create</h2>
  <form nz-form [formGroup]="userForm">
    <cdk-virtual-scroll-viewport itemSize="73" class="scroll" style="overflow-x: hidden;">
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="staff_id">Staff ID</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="staffIdErrorTpl">
          <input nz-input id="staff_id" formControlName="staff_id" placeholder="Write Staff ID" />
          <ng-template #staffIdErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">please input your staff id</ng-container>
            <ng-container *ngIf="control.hasError('pattern')">staff_id is E00000</ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="display_name">Display Name</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="displaynameErrorTpl">
          <input nz-input id="display_name" formControlName="display_name" placeholder="Write Display Name" />
          <ng-template #displaynameErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">please input your display name</ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name">Name</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="nameErrorTpl">
          <input nz-input id="name" formControlName="name" placeholder="Write Name" />
          <ng-template #nameErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">please input your name</ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="email">Email</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="emailErrorTpl">
          <input nz-input id="email" formControlName="email" (input)="onInput($event)" [nzAutocomplete]="auto"
            placeholder="Write Email" />
          <ng-template #emailErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">please input your email</ng-container>
            <ng-container *ngIf="control.hasError('pattern')">please enter a valid email address</ng-container>
          </ng-template>
          <nz-autocomplete #auto>
            <nz-auto-option *ngFor="let option of options" [nzValue]="option">{{ option }}</nz-auto-option>
          </nz-autocomplete>
        </nz-form-control>
      </nz-form-item>
      <!-- <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="password" nzRequired>Password</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="passwordErrorTpl">
          <nz-input-group [nzSuffix]="suffixTemplate">
            <input [type]="passwordVisible ? 'text' : 'password'" id="password" nz-input formControlName="password"
              placeholder="Write Password" />
            <ng-template #passwordErrorTpl let-control>
              <ng-container *ngIf="control.hasError('required')">please input your password</ng-container>
              <ng-container *ngIf="control.hasError('minlength')">password must be at least 6 characters</ng-container>
            </ng-template>
          </nz-input-group>
        </nz-form-control>
        <ng-template #suffixTemplate>
          <span nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
            (click)="passwordVisible = !passwordVisible"></span>
        </ng-template>
      </nz-form-item> -->
      <!-- <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="profile">Profile</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <input nz-input id="profile" formControlName="profile" />
        </nz-form-control>
      </nz-form-item> -->
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="role" nzRequired>Role</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-select id="role" nzPlaceHolder="Select Role" formControlName="role">
            <nz-option [nzValue]="1" nzLabel="Manager"></nz-option>
            <nz-option [nzValue]="2" nzLabel="Bse"></nz-option>
            <nz-option [nzValue]="3" nzLabel="Leader"></nz-option>
            <nz-option [nzValue]="4" nzLabel="Sub leader"></nz-option>
            <nz-option [nzValue]="5" nzLabel="Senior"></nz-option>
            <nz-option [nzValue]="6" nzLabel="Junior"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="department" nzRequired>Department</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-select class="tag-input" nzMode="default" nzPlaceHolder="Select Department"
            formControlName="department_id">
            <nz-option *ngFor="let department of departmentData" [nzLabel]="department.name"
              [nzValue]="department._id"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="team" nzRequired>Team</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24">
          <nz-select class="tag-input" nzMode="default" nzPlaceHolder="Select Team" formControlName="team_id">
            <ng-container *ngFor="let team of teamData">
              <nz-option *ngIf="userForm.controls['department_id'].value === team.department_id" [nzLabel]="team.name"
                [nzValue]="team._id"></nz-option>
            </ng-container>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="staff_id">Phone</nz-form-label>
        <nz-form-control [nzSm]="14" [nzXs]="24" [nzErrorTip]="phoneErrorTpl">
          <input nz-input id="phone" formControlName="phone" placeholder="Write Phone Number" />
          <ng-template #phoneErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">please input phone number</ng-container>
            <ng-container *ngIf="control.hasError('pattern')">require 11 digits</ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="address">Address</nz-form-label>
        <nz-form-control [nzSpan]="14">
          <textarea nz-input rows="2" placeholder="Write Address" formControlName="address"></textarea>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="about_me">AboutMe</nz-form-label>
        <nz-form-control [nzSpan]="14">
          <textarea nz-input rows="2" placeholder="Write Anything About YourSelf" formControlName="about_me"></textarea>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="6" [nzXs]="24">DOB</nz-form-label>
        <nz-form-control [nzSpan]="14">
          <nz-date-picker [nzDisabledDate]="disabledDate" formControlName="dob"></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
    </cdk-virtual-scroll-viewport>
  </form>
  <div nz-row *nzModalFooter class="footer" nzJustify="end">
    <button nz-button nz-col (click)="cancelCreate()">
      Cancel
    </button>
    <button nz-button nz-col nzType="primary" [disabled]="userForm.invalid" [nzLoading]="isConfirmLoading"
      (click)="showPopconfirm()">
      Create
    </button>
  </div>
</div>